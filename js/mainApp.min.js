jQuery(function(a){var b,c=io.connect(),d=a("#setUsername"),e=(a("#updateUsername"),a("#newUsername"),a("#usernameError")),f=a("#username"),g=a("#send-message"),h=a("#message"),i=a("#chat"),j={Vars:{OriginalTitle:document.title,Interval:null},On:function(a,b){var c=this;c.Vars.Interval=setInterval(function(){document.title=c.Vars.OriginalTitle==document.title?a:c.Vars.OriginalTitle},b?b:1e3)},Off:function(){clearInterval(this.Vars.Interval),document.title=this.Vars.OriginalTitle}};d.submit(function(d){d.preventDefault(),""==f.val()?e.html("Username can not be blank"):(c.emit("new user",f.val(),function(b){b?(a("#usernameWrap").hide(),a("#chatWrapper").show()):e.html("Username is already Taken!")}),b=f.val(),f.val(""))}),g.submit(function(a){a.preventDefault(),""==h.val()||(c.emit("send message",h.val()),h.val(""))}),Notification_sub=j,c.on("new message",function(c){c.username===b?c.colorClass="sent":(c.colorClass="received",a(window).blur(function(){Notification_sub.On("You have received a new message!")})),i.append('<li class="'+c.colorClass+'"><b><span>'+c.username+"</span></b></br>"+c.message+"<br/></li>"),window.scrollTo(0,document.body.scrollHeight)}),a(window).focus(function(){Notification_sub.Off()})});